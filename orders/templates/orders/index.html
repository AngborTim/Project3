{% extends "orders/base.html" %}
{% block title %}Pizza Houzze{% endblock %}

{% block main %}

<main class="container-fluid disabled" style="position: fixed;">
<div class="row">
  <div class="col-8" id="extra_nav">
    <div>
      <h4 class="text-center">Hello and welcome, dear {% if user == 'none' %}Guest{% else %} {{user.username}}{% endif %}!</h4>
      <h5 class="text-center">How would you like to feast today?</h5>
    </div>
  </div>
  <div class="col-4">
    <div>
      <nav class="navbar navbar-expand-lg">
        <span class="navbar-brand p-2" id="order_header">Shopping cart</span>
      </nav>
    </div>
  </div>
</div>


    <div class="row">
        <div id="scrl" class="col-8" style="overflow: scroll;">
        <table class="table table-bordered table-hover" style="width:90%;">
          {% for key, pza in allpizza.items %}
          <tr>
            <th id='{{ key|cut:" " }}' scope="col" class="text-center bg-info" colspan="3">{{ key }}</th>
          </tr>
          <tr>
            <th scope="col"></th>
            <th scope="col">Small</th>
            <th scope="col">Large</th>
          </tr>
            {% for piz in pza %}
            <tr>
              <td>{{piz.name}}</td>
              <td>
                <div class="d-flex justify-content-between">{{piz.priceSmall}}
                  <button type="button" data-item_pk="{{piz.pk}}" data-item_size="1" data-item_price="{{piz.priceSmall}}" class="btn_add badge badge-primary badge-pill">Add</button>
                </div>
              </td>
              <td>
                <div class="d-flex justify-content-between">{{piz.priceLarge}}
                  <button type="button" data-item_pk="{{piz.pk}}" data-item_size="2"  data-item_price="{{piz.priceLarge}}" class="btn_add badge badge-primary badge-pill">Add</button>
                </div>
              </td>
            </tr>
            {% endfor %}
          {% endfor%}

          {% for key, s_p in salads_pasta.items %}
          <tr>
            <th id='{{ key|cut:" " }}' scope="col" class="text-center bg-info" colspan="3">{{ key }}</th>
          </tr>
            {% for sal_pas in s_p %}
            <tr>
              <td colspan="2">{{sal_pas.name}}</td>
              <td>
                <div class="d-flex justify-content-between">{{sal_pas.priceSmall}}
                  <button type="button" data-item_pk="{{sal_pas.pk}}" data-item_size="3" data-item_price="{{sal_pas.priceSmall}}" class="btn_add badge badge-primary badge-pill">Add</button>
                </div>
              </td>
            </tr>
            {% endfor %}
          {% endfor%}
        </table>
      </div>

      <div class="col-4" id="order_list">
        <table class="table table-sm" id="order_t">
          <tr class="text-center">
            <th id="total" class="h2" colspan="2">
              {% if total %}
                Total: ${{ total }}
              {% else %}
                Cart is empty
              {% endif %}
             </th>
             <th>
               <button type="button" data-order_id="1" data-user_id="1" id="checkout" name="checkout" class="btn btn-success">Checkout</button>
             </th>
          </tr>

        {% if current_order_list %}
          {% for item in current_order_list  %}
          <tr id="item-{{ item.pk }}" class="item_block">
            <td>
              <button type="button" class="close delete_item" data-item_id="{{ item.pk }}"  data-order_id = "{{item.order_id.order_id}}">
                <span title="Delete an item">&times;</span>
              </button>
            </td>
            <td>{{item.itemSize.sizeName}} {{item.item.itemtype.name}} {{item.item.name}}</td>
            <td>${{item.itemPrice}}</td>
          </tr>
          {% endfor %}
        {% endif %}
          <tr>
            <td>
              <button type="button" class="close delete_item" data-item_id="1">
                <span title="Delete an item">&times;</span>
              </button>
            </td>
            <td>Pizza<br />
              <select class="topings" name="select" data-topping1>
                <option value="value1" disabled selected>Choose toppings</option>
                {% for top in pizza_topings %}
                  <option value="{{ top.pk }}">{{ top.name}}</option>
                {% endfor%}
              </select>
              <select name="select" data-topping2>
                <option value="value1" disabled selected>Choose toppings</option>
                {% for top in pizza_topings %}
                  <option value="{{ top.pk }}">{{ top.name}}</option>
                {% endfor%}
              </select>
              <select name="select" data-topping3>
                <option value="value1" disabled selected>Choose toppings</option>
                {% for top in pizza_topings %}
                  <option value="{{ top.pk }}">{{ top.name}}</option>
                {% endfor%}
              </select>


            </td>
            <td>$10</td>
          </tr>

        </table>

      </div>
  </div>
</main>


<script type="text/javascript">
  var user_id = {{ user_id }};
  var url_add_to_cart = "{% url 'add_to_cart' %}";
  var remove_item_from_cart = "{% url 'remove_item_from_cart' %}";//data-url="{% url 'remove_item_from_cart' %}"

</script>
{% endblock %}
